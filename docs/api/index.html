<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>NodeJSSMAPISimulator: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-84944684-1', 'auto');
      ga('send', 'pageview');

    </script>
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>NodeJS SMAPI Simulator</h1><p>A NodeJS based skill simulator library that uses the Amazon SMAPI /simulate and /invoke APIs for testing</p>
<h2>Installation</h2><p>You can install NodeJS SMAPI Simulator using the NPM:</p>
<pre class="prettyprint source"><code>npm install nodejs-smapi-simulator</code></pre><h2>Usage</h2><p>The <code>nodejsSMAPISimulator</code> object is the main object for interacting with the SMAPI testing APIs. It's parameters are:  </p>
<pre class="prettyprint source"><code>skillId [REQUIRED] - The skillId to run the test against
locale - The locale to use for the skill. Defaults to en-US
poolingInterval - The interval, in milliseconds, to poll for a simulation completion. Defaults to 1000 (ms)
endpointRegion - The endpoint region of the skill. Defaults to NA
profile - The ASK CLI profile to use when calling the SMAPI SimulateSkill API. Defaults to the SMAPI default profile  </code></pre><p>The following is an example of a simulation using this library with Mocha. </p>
<pre class="prettyprint source"><code>const simulator = new (require('nodejsSMAPISimulator'))(
    'skillIDgoesHere' ,
    { // optional parameters
        poolingInterval : 500,
        locale : 'en-US'
    }
);

describe('Skill Simulation', function() {
    let response = '';
    before(function() {
        this.timeout(15000); // Mocha as a default timeout that is shorter that the time it make take a skill to execute, so up Mocha's default timeout

        // run this in a before so it doesn't have to run for each assert (saves network traffic and decreases execution time.)
        return simulator.simulate('ask the bard')
            .then( function(result) {
                response = result;
            }, function(err) {
                assert.fail('Error invoking skill: '+err);
            });
    });

    describe('example phrase via text', function() {
        it('response should have valid speech', function() {
            assert.equal(
                response.skillExecutionInfo.invocationResponse.body.response.outputSpeech.text, 
                &quot;This is the valid speech text that should be returned&quot;
            );
        });

        it('response should have valid title', function() {
            assert.equal(
                response.skillExecutionInfo.invocationResponse.body.response.card.title, 
                &quot;This is the valid title&quot;
            );
        });

    });
}</code></pre><p>Using the invoke command is just as easy:</p>
<pre class="prettyprint source"><code>const simulator = new (require('nodejsSMAPISimulator'))(
    'skillIDgoesHere' ,
    { // optional parameters
        poolingInterval : 500,
        locale : 'en-US'
    }
);

describe('example phrase via JSON', function() {
    it('response should have valid speech', function() {
        return simulator.invoke(someJSONGoesHere)
            .then ( function(result) {
                assert.equal(
                    result.skillExecutionInfo.invocationResponse.body.response.outputSpeech.text, 
                    &quot;This is the valid speech text that should be returned&quot;
                );
            }, function(err) {
                assert.fail('Error invoking skill: '+err);
            });
    });
});</code></pre></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#merge">merge</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Tue Oct 24 2017 20:14:01 GMT-0700 (Pacific Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>